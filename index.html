<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiny Tales Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; user-select: none; }
        
        /* Blur-Effekt */
        .blur-reveal {
            filter: blur(15px);
            transition: filter 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .blur-reveal.revealed {
            filter: blur(0);
            cursor: default;
        }

        /* Animationen */
        .fade-in { animation: fadeIn 0.6s ease-out forwards; opacity: 0; }
        .slide-up { animation: slideUp 0.5s ease-out forwards; opacity: 0; transform: translateY(20px); }
        .draw-line { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: draw 2s ease-out forwards; }
        
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes draw { to { stroke-dashoffset: 0; } }

        /* Versteckte Scrollbar */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ path, className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            ChevronRight: (props) => <Icon {...props} path={<><path d="m9 18 6-6-6-6"/></>} />,
            ChevronLeft: (props) => <Icon {...props} path={<><path d="m15 18-6-6 6-6"/></>} />,
            Clock: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></>} />,
            Play: (props) => <Icon {...props} path={<><polygon points="5 3 19 12 5 21 5 3"/></>} />,
            Pause: (props) => <Icon {...props} path={<><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></>} />,
            RotateCcw: (props) => <Icon {...props} path={<><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></>} />,
            Check: (props) => <Icon {...props} path={<><polyline points="20 6 9 17 4 12"/></>} />,
            Pen: (props) => <Icon {...props} path={<><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></>} />,
            Zap: (props) => <Icon {...props} path={<><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></>} />,
            Search: (props) => <Icon {...props} path={<><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></>} />
        };

        // --- SPANNUNGSBOGEN GRAFIK ---
        const ArcVisual = () => (
            <div className="w-full h-32 relative mb-6 fade-in">
                <svg viewBox="0 0 800 150" className="w-full h-full">
                    {/* Definitions for markers */}
                    <defs>
                        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8" />
                        </marker>
                    </defs>
                    
                    {/* The Line */}
                    {/* Start (Low) -> Up (Normal) -> Peak (Twist) -> Open (Dashed) */}
                    <path d="M 50,120 L 150,120 L 400,50 L 420,100" fill="none" stroke="#94a3b8" strokeWidth="3" className="draw-line" />
                    <path d="M 420,100 L 750,100" fill="none" stroke="#94a3b8" strokeWidth="3" strokeDasharray="10,10" className="draw-line" style={{animationDelay: '1s'}} />
                    <path d="M 740,100 L 750,100" stroke="transparent" markerEnd="url(#arrow)" />

                    {/* Labels/Points */}
                    {/* 1. Einstieg */}
                    <circle cx="50" cy="120" r="6" className="fill-indigo-500" />
                    <text x="50" y="145" textAnchor="middle" className="text-xs font-bold fill-slate-500 uppercase">Start</text>
                    
                    {/* 2. Wendepunkt */}
                    <text x="400" y="40" textAnchor="middle" className="text-4xl">⚡</text>
                    <text x="400" y="20" textAnchor="middle" className="text-xs font-bold fill-indigo-600 uppercase tracking-widest">Wendepunkt</text>

                    {/* 3. Ende */}
                    <text x="700" y="90" textAnchor="middle" className="text-4xl text-slate-400">?</text>
                    {/* Text "Offen" entfernt */}
                </svg>
            </div>
        );

        // --- TIMER ---
        const Timer = ({ duration }) => {
            const [timeLeft, setTimeLeft] = useState(duration);
            const [isActive, setIsActive] = useState(false);

            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) {
                    interval = setInterval(() => setTimeLeft(t => t - 1), 1000);
                } else if (timeLeft === 0) setIsActive(false);
                return () => clearInterval(interval);
            }, [isActive, timeLeft]);

            const formatTime = (s) => `${Math.floor(s / 60).toString().padStart(2, '0')}:${(s % 60).toString().padStart(2, '0')}`;

            return (
                <div className="flex items-center space-x-4 bg-white px-6 py-3 rounded-2xl shadow-lg border border-slate-100">
                    <Icons.Clock className={isActive ? "text-green-500 animate-pulse" : "text-slate-400"} />
                    <span className="text-4xl font-mono font-bold text-slate-700">{formatTime(timeLeft)}</span>
                    <button onClick={() => setIsActive(!isActive)} className="p-2 bg-slate-100 rounded-full hover:bg-slate-200">
                        {isActive ? <Icons.Pause size={20}/> : <Icons.Play size={20}/>}
                    </button>
                    <button onClick={() => {setIsActive(false); setTimeLeft(duration);}} className="p-2 bg-slate-100 rounded-full hover:bg-slate-200">
                        <Icons.RotateCcw size={20}/>
                    </button>
                </div>
            );
        };

        // --- DATEN ---
        const phases = [
            {
                id: 0,
                title: "Einstieg",
                subtitle: "Kopfkino an!",
                type: "visual",
                content: {
                    top: "»...hinterlasse mein gesamtes Vermögen meiner geliebten Maja.«",
                    mid: "Der Notar schloss das Dokument und blickte in die Runde.",
                    reveal: "Maja bellte."
                }
            },
            {
                id: 1,
                title: "Erarbeitung I",
                subtitle: "Der Beweis",
                type: "progressive-table",
                rows: [
                    { label: "1. Unvermittelter Einstieg", text: "Start mitten im Satz (»...hinterlasse«)" },
                    { label: "2. Alltäglichkeit", text: "Notar, Erben (keine Helden)" },
                    { label: "3. Wendepunkt (Blitz)", text: "»Maja bellte« (Erwartungsbruch)", highlight: true },
                    { label: "4. Offenes Ende", text: "Reaktion der Erben fehlt (Kopfkino)" }
                ]
            },
            {
                id: 2,
                title: "Erarbeitung II",
                subtitle: "Schreibwerkstatt",
                type: "writing",
                timer: 1020, // 17 min
                rules: ["Max. 5 Sätze", "Start mitten im Geschehen", "MUSS einen Wendepunkt haben"],
                starters: [
                    "Das Foto hatte nach zwei Minuten schon über 100 Likes.",
                    "Er war der höflichste Mensch, den sie je getroffen hatte.",
                    "Der Tisch war festlich gedeckt und der Braten duftete herrlich.",
                    "Sie richtete ihre Krone und lächelte in die Kamera.",
                    "Endlich hielt er den Schlüssel zu seinem Traumhaus in der Hand.",
                    "Es war das perfekte Date, genau wie im Film.",
                    "Niemand in der Nachbarschaft hätte ihm das zugetraut."
                ]
            },
            {
                id: 3,
                title: "Feedback",
                subtitle: "Beobachtungsauftrag",
                type: "checklist",
                intro: "Achtet beim Zuhören genau auf diese Punkte:",
                criteria: [
                    "Wurden wir sofort in die Situation geworfen?",
                    "Gab es einen klaren Wendepunkt?",
                    "Bleibt das Ende offen (Kopfkino)?"
                ]
            },
            {
                id: 4,
                title: "Ausblick",
                subtitle: "Transfer",
                type: "transfer",
                quote: "Ohne den Wendepunkt ist es langweilig.",
                next: "Nächste Stunde: Eine Kurzgeschichte mit genau solch einem strukturellen Bruch."
            }
        ];

        // --- HAUPT-APP ---
        const App = () => {
            const [phaseIdx, setPhaseIdx] = useState(0);
            const [isRevealed, setIsRevealed] = useState(false);
            const [tableStep, setTableStep] = useState(0);

            const current = phases[phaseIdx];

            useEffect(() => {
                setIsRevealed(false);
                setTableStep(0);
            }, [phaseIdx]);

            const next = () => { if (phaseIdx < phases.length - 1) setPhaseIdx(p => p + 1); };
            const prev = () => { if (phaseIdx > 0) setPhaseIdx(p => p - 1); };

            const advanceTable = () => {
                if (current.type === 'progressive-table' && tableStep < current.rows.length) {
                    setTableStep(s => s + 1);
                }
            };

            return (
                <div className="flex flex-col h-screen bg-slate-50 relative font-sans">
                    
                    {/* Header */}
                    <div className="absolute top-0 left-0 w-full p-8 flex justify-between items-start z-10 pointer-events-none">
                        <div>
                            <h1 className="text-indigo-900 text-5xl font-black tracking-tighter mb-2">{current.title}</h1>
                            <div className="inline-block px-4 py-1 bg-indigo-100 text-indigo-700 font-bold rounded-full uppercase tracking-widest text-sm shadow-sm">
                                {current.subtitle}
                            </div>
                        </div>
                    </div>

                    {/* Content Area */}
                    <div className="flex-1 flex flex-col justify-center items-center px-10 pt-20 pb-10 w-full max-w-7xl mx-auto" key={phaseIdx}>
                        
                        {/* 0. EINSTIEG (MAJA) */}
                        {current.type === 'visual' && (
                            <div className="text-center max-w-4xl space-y-12 fade-in">
                                <p className="text-4xl md:text-5xl font-serif text-slate-700 leading-tight italic">
                                    {current.content.top}
                                </p>
                                <p className="text-2xl text-slate-500 font-medium">
                                    {current.content.mid}
                                </p>
                                <div onClick={() => setIsRevealed(true)} className="mt-12 py-8 px-12 bg-white rounded-2xl shadow-xl border-2 border-indigo-100 inline-block transition-transform active:scale-95 cursor-pointer">
                                    <div className={`text-6xl font-black text-indigo-600 ${isRevealed ? 'blur-reveal revealed' : 'blur-reveal'}`}>
                                        {current.content.reveal}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* 1. ERARBEITUNG I (SPANNUNGSBOGEN + TABELLE) */}
                        {current.type === 'progressive-table' && (
                            <div 
                                onClick={advanceTable} 
                                className="w-full max-w-5xl cursor-pointer min-h-[500px] flex flex-col justify-start pt-10"
                            >
                                {/* Visualisierung oben */}
                                <ArcVisual />

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 fade-in mt-6">
                                    {/* Header für die Tabelle - jetzt ohne Klick-Anweisung */}
                                    <div className="md:col-span-2 text-center mb-2 text-slate-300 font-bold uppercase tracking-widest text-sm border-b border-slate-200 pb-2">
                                        Merkmal (Links) — Beweis (Rechts)
                                    </div>
                                    
                                    {current.rows.map((row, i) => (
                                        <React.Fragment key={i}>
                                            {/* Linke Seite (Theorie) */}
                                            <div className={`bg-white p-5 rounded-xl shadow-sm border border-slate-200 flex items-center transition-all duration-500 ${i < tableStep ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>
                                                <span className="bg-slate-100 w-8 h-8 flex items-center justify-center rounded-full mr-4 font-bold text-slate-500">{i+1}</span>
                                                <span className="text-xl font-bold text-slate-700">{row.label}</span>
                                            </div>
                                            
                                            {/* Rechte Seite (Beweis) */}
                                            <div className={`p-5 rounded-xl shadow-md border flex items-center transition-all duration-500 delay-75 ${i < tableStep ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'} ${row.highlight ? 'bg-indigo-600 border-indigo-600 text-white' : 'bg-indigo-50 border-indigo-100 text-indigo-900'}`}>
                                                <Icons.Check className="mr-4 flex-shrink-0" />
                                                <span className="text-xl font-medium">{row.text}</span>
                                            </div>
                                        </React.Fragment>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* 2. ERARBEITUNG II (SCHREIBEN) */}
                        {current.type === 'writing' && (
                            <div className="w-full flex flex-col md:flex-row gap-8 h-full max-h-[70vh] fade-in">
                                <div className="w-full md:w-1/3 flex flex-col gap-6">
                                    <Timer duration={current.timer} />
                                    <div className="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 flex-1">
                                        <div className="flex items-center gap-3 mb-6 text-indigo-600 border-b pb-4">
                                            <Icons.Zap />
                                            <span className="font-bold uppercase tracking-wider">Regeln</span>
                                        </div>
                                        <ul className="space-y-4">
                                            {current.rules.map((r, i) => (
                                                <li key={i} className="flex items-start text-lg text-slate-700 font-medium">
                                                    <span className="mr-3 text-indigo-400">•</span> {r}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                                <div className="w-full md:w-2/3 bg-slate-100 p-8 rounded-3xl border-2 border-dashed border-slate-300 overflow-y-auto">
                                    <div className="flex items-center gap-3 mb-6 text-slate-500">
                                        <Icons.Pen />
                                        <span className="font-bold uppercase tracking-wider">Starthilfen</span>
                                    </div>
                                    <div className="grid gap-3">
                                        {current.starters.map((s, i) => (
                                            <div key={i} className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm text-slate-700 text-lg hover:border-indigo-400 hover:shadow-md transition-all">
                                                "{s}..."
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* 3. FEEDBACK (CHECKLISTE) */}
                        {current.type === 'checklist' && (
                            <div className="w-full max-w-3xl fade-in">
                                <div className="text-center mb-10">
                                    <p className="text-2xl text-slate-500 font-medium">{current.intro}</p>
                                </div>
                                <div className="space-y-6">
                                    {current.criteria.map((c, i) => (
                                        <div key={i} className="flex items-center p-6 bg-white rounded-2xl shadow-md border-l-8 border-indigo-500 slide-up" style={{animationDelay: `${i * 0.2}s`}}>
                                            <div className="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 mr-6 flex-shrink-0">
                                                <Icons.Search />
                                            </div>
                                            <span className="text-2xl font-bold text-slate-800">{c}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* 4. AUSBLICK (TRANSFER) */}
                        {current.type === 'transfer' && (
                            <div className="text-center max-w-4xl relative fade-in">
                                <div className="absolute -top-20 left-1/2 transform -translate-x-1/2 opacity-10">
                                    <Icons.Zap size={200} />
                                </div>
                                <blockquote className="text-5xl md:text-6xl font-black text-slate-800 leading-tight mb-16 relative z-10">
                                    "{current.quote}"
                                </blockquote>
                                <div className="bg-indigo-900 text-white p-10 rounded-3xl shadow-2xl transform -rotate-1 relative z-10">
                                    <div className="text-indigo-300 font-bold uppercase tracking-widest mb-2 text-sm">Nächste Stunde</div>
                                    <div className="text-2xl md:text-3xl font-bold">{current.next}</div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Navigation Buttons */}
                    <div className="fixed bottom-8 right-8 flex space-x-4 z-50">
                        <button onClick={prev} disabled={phaseIdx === 0} className={`p-5 rounded-full shadow-xl transition-all ${phaseIdx === 0 ? 'bg-slate-100 text-slate-300 cursor-not-allowed' : 'bg-white text-slate-800 hover:scale-110'}`}>
                            <Icons.ChevronLeft size={28} />
                        </button>
                        <button onClick={next} disabled={phaseIdx === phases.length - 1} className={`p-5 rounded-full shadow-xl transition-all ${phaseIdx === phases.length - 1 ? 'bg-slate-100 text-slate-300 cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-700 hover:scale-110'}`}>
                            <Icons.ChevronRight size={28} />
                        </button>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
